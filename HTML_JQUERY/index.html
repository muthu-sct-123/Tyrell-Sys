<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Card Game</title>
	<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <link rel="stylesheet" href="css/App.css" />
</head>
<body>

    <h4 class="player"><b>CARD DECK (FRONTEND: HTML - JAVASCRIPT - JQUERY)</b></h4>
    
    <div class="player">
		<label for="players">Number of players:</label>
		<input type="number" id="players" value="4" min="1">
		<button id="distribute">Distribute Cards</button>
    </div>
	<div style="text-align: right; margin: 10px 10px">
		<a style="text-decoration: none; color: red" href="indexCode.html">View Code</a>
	</div>

    <div id="output"></div>

    <script>
        $(document).ready(function () {
            // Initialize the deck of cards
            const suitsSymbol = ['â™ ', 'â™¥', 'â™¦', 'â™£']; //Not in use - For testing purpose only
			const suits = ['S', 'H', 'D', 'C'];
            const values = ['A', '2', '3', '4', '5', '6', '7', '8', '9', 'X', 'J', 'Q', 'K'];
			const cardUnicodeMap = {
				'S-A': 'ðŸ‚¡', 'S-2': 'ðŸ‚¢', 'S-3': 'ðŸ‚£', 'S-4': 'ðŸ‚¤', 'S-5': 'ðŸ‚¥', 'S-6': 'ðŸ‚¦', 'S-7': 'ðŸ‚§', 'S-8': 'ðŸ‚¨', 'S-9': 'ðŸ‚©', 'S-X': 'ðŸ‚ª', 'S-J': 'ðŸ‚«', 'S-Q': 'ðŸ‚­', 'S-K': 'ðŸ‚®',
				'H-A': 'ðŸ‚±', 'H-2': 'ðŸ‚²', 'H-3': 'ðŸ‚³', 'H-4': 'ðŸ‚´', 'H-5': 'ðŸ‚µ', 'H-6': 'ðŸ‚¶', 'H-7': 'ðŸ‚·', 'H-8': 'ðŸ‚¸', 'H-9': 'ðŸ‚¹', 'H-X': 'ðŸ‚º', 'H-J': 'ðŸ‚»', 'H-Q': 'ðŸ‚½', 'H-K': 'ðŸ‚¾',
				'D-A': 'ðŸƒ', 'D-2': 'ðŸƒ‚', 'D-3': 'ðŸƒƒ', 'D-4': 'ðŸƒ„', 'D-5': 'ðŸƒ…', 'D-6': 'ðŸƒ†', 'D-7': 'ðŸƒ‡', 'D-8': 'ðŸƒˆ', 'D-9': 'ðŸƒ‰', 'D-X': 'ðŸƒŠ', 'D-J': 'ðŸƒ‹', 'D-Q': 'ðŸƒ', 'D-K': 'ðŸƒŽ',
				'C-A': 'ðŸƒ‘', 'C-2': 'ðŸƒ’', 'C-3': 'ðŸƒ“', 'C-4': 'ðŸƒ”', 'C-5': 'ðŸƒ•', 'C-6': 'ðŸƒ–', 'C-7': 'ðŸƒ—', 'C-8': 'ðŸƒ˜', 'C-9': 'ðŸƒ™', 'C-X': 'ðŸƒš', 'C-J': 'ðŸƒ›', 'C-Q': 'ðŸƒ', 'C-K': 'ðŸƒž'
			};			
            let deck = [];

            // Generate suits-values pair
            suits.forEach(suit => {
                values.forEach(value => {
                    pattern = `${suit}-${value}`;
                    
                    // Map cardUnicodeMap with the generated suits-values pair
                    for (const [key, value] of Object.entries(cardUnicodeMap)) {
                        if (key.includes(pattern) || String(value).includes(pattern)) {
                            // Assign class name - 'cardblack' for Spades (or) Clubs &
                            // class name - 'cardred' for Diamond (or) Hearts
                            if(key.includes('S') || key.includes('C')) {
                                deck.push(`${value}-cardblack`);
                            } else {
                                deck.push(`${value}-cardred`);
                            }
                        }
                    }
                });
            });

            // Shuffle the deck - Swapping the DeckCard Array
            function shuffle(deckCard) {
				//Loops through each card
				for (let i = 0; i < deckCard.length; i++) {
					// picks the random number between 0 and length of the deck
					const shuffleCard = Math.floor(Math.random() * (deckCard.length));
    
					//swap the current with a random position
					[ deckCard[i], deckCard[shuffleCard] ] = [ deckCard[shuffleCard], deckCard[i] ];
				}
            }

            // Function to distribute cards to players
            function distributeCards(numPlayers) {
                $("#output").empty(); // Clear previous output
                //Since the Card Deck only contains 52 cards, setting the maximum comparison value to 52
                if (numPlayers < 1 || numPlayers > 52) {
                    alert("Number of players should be between 1 and 52.");
                    return;
                }

                shuffle(deck);

                //Assign Empty Array of Cards to players
                const players = Array.from({ length: numPlayers }, () => []);

                // Populate Empty Array with Cards (Assigned to players based on Index)
                for (let i = 0; i < deck.length; i++) {
                    players[i % numPlayers].push(deck[i]);
                }

                // HTML Output - Display the Player # along with the assigned cards
                players.forEach((player, index) => {
                    const playerCard = $("<div>").addClass("player w3-pale-green w3-bottombar w3-border-green w3-border w3-round-large")
						.html(`&nbsp;<strong>Player ${index + 1}</strong><br/>`);
					
                    // Assign Deck Card Array along with Class Name for each card
                    player.forEach(card => {
						const cardArray = card.split("-");
                        $("<div>").addClass(cardArray[1]).text(cardArray[0]).appendTo(playerCard);
                    });	
					
                    $("#output").append(playerCard);
                });
            }

            // Invoke distributeCards function which will perform the card shuffle / assignment logic
            $("#distribute").click(function () {
                const numPlayers = parseInt($("#players").val());
                distributeCards(numPlayers);
            });
        });
    </script>
</body>
</html>